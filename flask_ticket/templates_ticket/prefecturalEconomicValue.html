{% extends "layout_ticket.html" %}

{% block BODY %}
<h3 id="title1" style="text-align: center;"></h3>
<h5 id="title2" style="text-align: center;"></h5>

<div id="imageCarousel" class="carousel slide carousel-fade" data-ride="carousel">
    <div class="carousel-inner" id="carouselInner"></div>

    <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </a>
    <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </a>
</div>

<script>
    const images = [
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/H31.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R1.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R2.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R3.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R4.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R5.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R6.png",
        "{{url_for('ticket.index_view')}}/static_ticket/images/prefecturalEconomicValue/R7.png",
    ];

    const titles = [
        ["平成31年 1/47都道府県", "大学入学"],
        ["令和元年 11/47都道府県", "東海道(R1)"],
        ["令和2年 11/47都道府県", "新型コロナウイルス感染症"],
        ["令和3年 19/47都道府県", "山陽(R2)，九州(R3)"],
        ["令和4年 29/47都道府県", "東北(R4,R6,R7)，北海道(R5,R12)"],
        ["令和5年 41/47都道府県", "北陸(R8)，四国(R11)"],
        ["令和6年 47/47都道府県", "山陰(R9)，九州(R10)"],
        ["令和7年 47/47都道府県", "就職"],
    ];

    const carouselInner = document.getElementById("carouselInner");

    // カルーセルに画像を追加
    images.forEach((imgData, idx) => {
        const div = document.createElement("div");
        div.className = "carousel-item" + (idx === 0 ? " active" : "");

        const img = document.createElement("img");
        img.src = imgData;
        img.className = "d-block mx-auto";
        img.style.width = window.innerHeight * 0.6 + 'px';
        img.style.height = "auto";

        div.appendChild(img);
        carouselInner.appendChild(div);
    });

    // 最初のタイトル表示
    document.getElementById("title1").innerText = titles[0][0];
    document.getElementById("title2").innerText = titles[0][1];

    // スライドイベントでタイトルを更新
    $('#imageCarousel').on('slide.bs.carousel', function (e) {
        const index = $(e.relatedTarget).index();
        document.getElementById("title1").innerText = titles[index][0];
        document.getElementById("title2").innerText = titles[index][1];
    });

    $('#imageCarousel').carousel({ interval: 1500 }); 
</script>

{% endblock %}